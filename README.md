# 复函数可视化项目

这个项目使用 Manim 库创建复函数的可视化动画，帮助理解复变函数的行为和导数特性。

## 项目概述

复变函数在数学和物理学中有广泛应用，但其几何意义往往难以直观理解。本项目通过动画方式展示：

1. 当自变量 z 沿不同路径移动时，函数值 f(z) 的轨迹变化
2. 复函数在不同点的导数特性，通过彩色线段可视化展示

## 功能特点

- **路径演示**：展示自变量沿矩形、圆形、径向和螺线等不同路径移动时，函数值的轨迹
- **导数可视化**：通过彩色线段展示复函数在不同点的导数特性
- **多函数支持**：内置多个复函数示例，包括可导函数和不可导函数
- **字幕系统**：自动生成带时间戳的字幕文件，便于后期处理
- **通用模板**：提供可复用的动画模板，简化新可视化的创建过程

## 通用模板使用说明

项目提供了一个通用的 Manim 动画模板 (`template.py`)，具有以下特性：

- **自动字幕系统**：根据文本长度自动计算显示时间
- **字幕文件生成**：自动生成 JSONL 格式的字幕文件
- **语音合成集成**：通过 tts 引擎自动为动画添加语音解说，注意需要将 api key 配置到系统变量
- **时间同步管理**：自动维护动画计时器，确保字幕与动画同步

### 使用模板创建新动画

1. 复制 `template.py` 并重命名为你的新动画文件
2. 修改 `construct` 方法中的内容，添加你的自定义动画
3. 使用 `update_subtitle` 方法添加字幕，它会自动处理时间同步
4. 对于你添加的任何动画操作，确保设置 `run_time` 参数并同步更新 `animation_timer`

示例代码：

```python
# 添加字幕
self.update_subtitle("这是我的自定义动画", wait=3)

# 创建并播放动画对象
my_object = Circle()
self.play(Create(my_object), run_time=2.0)
self.animation_timer += 2.0  # 更新计时器
```

### 运行模板动画

```bash
python template.py
```

这将自动渲染动画，生成字幕文件，并通过 tts 引擎自动添加语音解说。

## 已实现的函数

1. `f(z) = z^2/2`：简单的二次函数
2. `f(z) = z^3/4 - z^2/2 + z`：高阶多项式函数
3. `f(z) = (x+y) + (x^2+y^2)/2*i`：不可导的复函数示例

## 安装与使用

### 前提条件

- Python 3.7+
- Manim 库
- NumPy
- Matplotlib

### 安装依赖

```bash
pip install manim numpy matplotlib
```

### 运行演示

```bash
manim -ql complex_function_visualization.py ComplexFunctionVisualization
```

参数说明：
- `-q`：设置视频质量（l=低, m=中, h=高）
- `-l`：低质量，适合快速预览

## 项目结构

- `complex_function_visualization.py`：主程序文件
- `media/`：生成的媒体文件和字幕存放目录

## 技术细节

### 路径演示

通过 Manim 的 `TracedPath` 和 `MoveAlongPath` 动画，展示自变量和函数值的轨迹。支持的路径类型：

- 矩形路径
- 圆形路径
- 径向路径
- 阿基米德螺线

### 导数可视化

使用数值微分方法计算复函数在不同方向上的导数，并通过彩色线段可视化。线段的方向和长度反映了导数的方向和大小，颜色则用于区分不同的方向。

对于可导函数，df 线段应形成一个圆环，反映了复函数导数的几何意义。对于不可导函数，df 线段的分布则会显示非圆环或绕圈方向和 dz 不一致等异常行为。

### 字幕系统

自动生成 JSONL 格式的字幕文件，包含字幕编号、文本内容和时间戳，便于后期处理和多语言支持。

## 扩展与自定义

### 添加新函数

在文件开头定义新的复函数和对应的 LaTeX 公式：

```python
def complex_function4(z):
    return np.sin(z)

latex_formula4 = "f(z) = \sin(z)"
```

然后在 `construct` 方法中添加对应的演示代码，参照现有部分照搬或稍加修改均可。

### 自定义路径

可以通过添加新的路径创建方法来扩展路径类型，只需返回路径对象和起始点。

## 注意事项

- 渲染高质量视频可能需要较长时间
- 复杂函数的数值计算可能在某些点附近不稳定

## 未来计划

- 添加更多经典复函数示例
- 实现复变函数的等值线和等相线可视化
- 支持交互式探索复函数特性
- 添加更多语言的字幕支持

## 许可证

MIT 